{"ast":null,"code":"import logo from'./logo.svg';import'./App.css';import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Files(){const[files,setFiles]=useState([]);useEffect(()=>{async function fetchFiles(){const response=await fetch(\"/getFiles\",{method:\"POST\"});if(response.status==200){const data=await response.json();setFiles(data);}}fetchFiles();},[]);// Пустой массив зависимостей гарантирует, что запрос выполнится только один раз\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"files_wrapper\",children:files.map((file,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"item\",children:file.name},index))});}async function checkAuth(login,pwd){let response;if(isNaN(login)||isNaN(pwd)){response=await fetch(\"login\",{method:\"POST\",headers:{\"Content-type\":\"application/json\"},body:JSON.stringify({\"login\":login,\"password\":pwd})});}else{response=await fetch(\"login\",{method:\"POST\"});}const json=await response.json();console.log(JSON.stringify(json));if(json[\"status\"]==\"ok\"){console.log(\"status okay\");return true;}return false;}async function login_confirm(){const login_input=document.querySelector(\".login\");const pwd_input=document.querySelector(\".pwd\");const login=login_input.value;const pwd=pwd_input.value;if(login===\"\"||pwd===\"\"){if(login_input.value===\"\"){login_input.style.color=\"red\";}if(pwd_input.value===\"\"){pwd_input.style.color=\"red\";}return;}login_input.style.color=\"black\";pwd_input.style.color=\"black\";return await checkAuth(login,pwd);}async function Login_form(){const[renderFiles,setRenderFiles]=useState(false);useEffect(()=>{const fetchAuthStatus=async()=>{const status=await checkAuth(NaN,NaN);setRenderFiles(status);};fetchAuthStatus();},[]);// Пустой массив зависимостей гарантирует, что запрос выполнится только один раз\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[!renderFiles&&/*#__PURE__*/_jsxs(\"div\",{className:\"login_wrapper\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0412\\u0445\\u043E\\u0434\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input_wrapper\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u041B\\u043E\\u0433\\u0438\\u043D: \"}),/*#__PURE__*/_jsx(\"input\",{className:\"login\",placeholder:\"type login here\",type:\"email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input_wrapper\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C: \"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"type password here\",className:\"pwd\",type:\"password\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:async()=>{const status=await login_confirm();setRenderFiles(status);},children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]}),renderFiles&&/*#__PURE__*/_jsx(Files,{})]});}function Header(){return/*#__PURE__*/_jsx(\"div\",{className:\"header_wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"item\",children:/*#__PURE__*/_jsx(\"p\",{children:\"data storage\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"item\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/about\",children:\"\\u043E \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0435\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"item\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"profile\"})})]})});}function App(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:/*#__PURE__*/_jsx(Login_form,{})})]});}export default App;","map":{"version":3,"names":["logo","React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Files","files","setFiles","fetchFiles","response","fetch","method","status","data","json","className","children","map","file","index","name","checkAuth","login","pwd","isNaN","headers","body","JSON","stringify","console","log","login_confirm","login_input","document","querySelector","pwd_input","value","style","color","Login_form","renderFiles","setRenderFiles","fetchAuthStatus","NaN","placeholder","type","onClick","Header","href","App"],"sources":["/home/user/Desktop/projects/data_storage/frontend/datastorage/src/App.js"],"sourcesContent":["import logo from './logo.svg';\nimport './App.css';\nimport React, { useState, useEffect } from 'react';\n\nfunction Files() {\n  const [files, setFiles] = useState([]);\n\n  useEffect(() => {\n    async function fetchFiles() {\n      const response = await fetch(\"/getFiles\", {\n        method: \"POST\"\n      });\n\n      if (response.status == 200) {\n        const data = await response.json();\n        setFiles(data);\n      }\n    }\n\n    fetchFiles();\n  }, []); // Пустой массив зависимостей гарантирует, что запрос выполнится только один раз\n\n  return (\n    <div className=\"files_wrapper\">\n      {files.map((file, index) => (\n        <div key={index} className=\"item\">\n          {file.name}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nasync function checkAuth(login, pwd) {\n  let response;\n  if (isNaN(login) || isNaN(pwd)) {\n    response = await fetch(\"login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        \"login\": login,\n        \"password\": pwd\n      })\n    })\n  }\n  else {\n    response = await fetch(\"login\", {\n      method: \"POST\"})\n  }\n  const json = await response.json()\n  console.log(JSON.stringify(json))\n\n  if (json[\"status\"] == \"ok\") {\n    console.log(\"status okay\")\n    return true;\n  }\n  return false;\n}\n\nasync function login_confirm() {\n  const login_input = document.querySelector(\".login\");\n  const pwd_input = document.querySelector(\".pwd\");\n\n  const login = login_input.value;\n  const pwd = pwd_input.value;\n\n  if (login === \"\" || pwd === \"\") {\n    if (login_input.value === \"\") {\n      login_input.style.color = \"red\";\n    }\n    if (pwd_input.value === \"\") {\n      pwd_input.style.color = \"red\";\n    }\n    return;\n  }\n\n  login_input.style.color = \"black\";\n  pwd_input.style.color = \"black\";\n\n  return await checkAuth(login, pwd)\n}\n\nasync function Login_form() {\n  const [renderFiles, setRenderFiles] = useState(false);\n\n  useEffect(() => {\n    const fetchAuthStatus = async () => {\n      const status = await checkAuth(NaN, NaN);\n      setRenderFiles(status);\n    };\n    fetchAuthStatus();\n  }, []); // Пустой массив зависимостей гарантирует, что запрос выполнится только один раз\n\n  return (\n    <div>\n      {!renderFiles && (\n        <div className=\"login_wrapper\">\n          <h3>Вход</h3>\n\n          <div className=\"inputs\">\n            <div className=\"input_wrapper\">\n              <p>Логин: </p>\n              <input\n                className=\"login\"\n                placeholder='type login here'\n                type=\"email\" />\n            </div>\n\n            <div className=\"input_wrapper\">\n              <p>Пароль: </p>\n              <input placeholder='type password here'\n                className=\"pwd\"\n                type=\"password\" />\n            </div>\n          </div>\n\n          <button className=\"submit-btn\" onClick={async () => {\n            const status = await login_confirm();\n            setRenderFiles(status);\n          }}>Войти</button>\n        </div>\n      )}\n      {renderFiles && <Files />}\n    </div>\n  );\n}\n\nfunction Header() {\n  return (\n    <div className=\"header_wrapper\">\n      <div className=\"header\">\n        <div className=\"item\">\n          <p>data storage</p>\n        </div>\n\n        <div className=\"item\">\n          <a href='/about'>о проекте</a>\n        </div>\n\n        <div className=\"item\">\n          <a href='/'>profile</a>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <div>\n      <Header />\n      <div className=\"main\">\n        <Login_form />\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}